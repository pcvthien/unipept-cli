#!/usr/bin/env ruby
require 'cri'

root_cmd = Cri::Command.new_basic_root.modify do
  name 'prot2pept'
  required :p, :pattern, "cleavage pattern to split input protein (default: ([KR])([^P]))"
  run do |opts, args, cmd|
    pattern = opts.fetch(:pattern, "([KR])([^P])")
    puts $stdin.readlines.map { |prot| prot.gsub(/#{pattern}/,"\\1\n\\2").gsub(/#{pattern}/, "\\1\n\\2") }
  end
end

root_cmd.run(ARGV)
