#!/usr/bin/env ruby
require 'cri'

root_cmd = Cri::Command.new_basic_root.modify do
  name 'peptfilter'
  required :l, :minlen, "minimum length (default: 5)"
  required :u, :maxlen, "minimum length (default: 5)"
  run do |opts, args, cmd|
    minlen = opts.fetch(:minlen, "5").to_i
    maxlen = opts.fetch(:maxlen, "50").to_i
    puts $stdin.readlines.select do |pept|
      pept.length >= minlen &&
      pept.length <= maxlen
    end
  end
end

root_cmd.run(ARGV)
